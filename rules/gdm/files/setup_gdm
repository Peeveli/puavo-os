#!/bin/sh

set -eu

puavo-template /etc/gdm3/greeter.dconf-defaults <<'EOF'
# These are dconf-settings for gdm.
# Some that work in a desktop session might not work here.

[org/gnome/login-screen]
logo='{puavo_desktop_vendor_logo}'
fallback-logo='/usr/share/icons/hicolor/48x48/emblems/emblem-debian-white.png'
disable-user-list={if puavo_admin_personally_administered == "true"}false{else}true{end}
enable-guestuser={if puavo_guestlogin_enabled == "true"}true{else}false{end}

[org/gnome/desktop/peripherals/touchpad]
natural-scroll=false
tap-to-click=true

[org/gnome/desktop/session]
idle-delay=uint32 0

[org/gnome/settings-daemon/peripherals/touchscreen]
orientation-lock=true

[org/gnome/shell]
enabled-extensions=['appindicatorsupport@rgcjonas.gmail.com', 'bottompanel@tmoer93', 'hostinfo@puavo.org', 'Move_Clock@rmy.pobox.com', 'uparrows@puavo.org', 'user-theme@gnome-shell-extensions.gcampax.github.com']

[org/gnome/shell/extensions/user-theme]
name='Puavo'
EOF

dconf compile /var/lib/gdm3/greeter-dconf-defaults /usr/share/gdm/dconf
