#!/bin/sh

set -eu

command=$1
shift

case "${command}" in
    configure)
        upstream_dir=$1

        ln -fns "${upstream_dir}" /opt/teddybear

        cat <<EOF > /usr/share/applications/teddybear.desktop
[Desktop Entry]
Terminal=false
Exec=/opt/teddybear/run
Icon=/opt/teddybear/icons/teddybear48.png
Type=Application
Categories=Development
StartupNotify=false
Name=Teddy Bear
GenericName=Teddy Bear
EOF

        ;;

    unconfigure)
        rm -rf /opt/teddybear \
               /usr/share/applications/teddybear.desktop
        ;;

    unpack)
        upstream_pack=$1
        upstream_dir=$2
        tar xf "${upstream_pack}" -C "${upstream_dir}"
        ;;

    *)
        ;;
esac
