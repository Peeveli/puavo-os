#!/bin/sh

set -eu

pam_install() {
  install -m 644 -o root -g root "$@"
}

# XXX get rid of hosttype handling
hosttype=$(puavo-conf puavo.hosttype)
case "$hosttype" in
  fatclient|laptop)
    pam_install "/etc/puavo-conf/files/etc/pam.d/puavo-account-${hosttype}" \
                /etc/pam.d/puavo-account
    pam_install "/etc/puavo-conf/files/etc/pam.d/puavo-auth-${hosttype}" \
                /etc/pam.d/puavo-auth
    pam_install "/etc/puavo-conf/files/etc/pam.d/puavo-session-${hosttype}" \
                /etc/pam.d/puavo-session
    ;;
esac
